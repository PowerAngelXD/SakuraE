<div align="center">
<img src="banner.png"/>

<h1> 
   ðŸŒ¸SakuraEðŸŒ¸
   <br/>
   <img src="https://img.shields.io/badge/Version-dev0.0-red"/>
   <img src="https://img.shields.io/badge/Windows%2011-333333?style=flat&logo=quarto&logoColor=white&labelColor=0078D4"/>
   <img src="https://img.shields.io/badge/Arch%20Linux-333333?style=flat&logo=archlinux&logoColor=white&labelColor=1793D1"/>
</h1>

[ç®€ä½“ä¸­æ–‡](README-zh_cn.md)

</div>

### Based on LLVM, A Compilable Programming Language

## [TODO List](todo.md)

## Project Structure (Main)
> [!warning]
> This part was generated by AI

```
SakuraE/
â”œâ”€â”€ CMakeLists.txt                  # CMake build configuration file
â”œâ”€â”€ main.cpp                        # Main entry point of the compiler
â”œâ”€â”€ atrI/                           # Interactive CLI and configuration management
â”‚   â”œâ”€â”€ atrI.hpp                    # Main header for atrI
â”‚   â”œâ”€â”€ commands.hpp                # CLI command definitions
â”‚   â”œâ”€â”€ README.md                   # atrI documentation
â”‚   â”œâ”€â”€ utils.hpp                   # Utility functions for CLI
â”‚   â””â”€â”€ config/                     # Configuration management
â”‚       â””â”€â”€ config.hpp              # Configuration definitions
â”œâ”€â”€ Compiler/                       # Core compiler components
â”‚   â”œâ”€â”€ Error/                      # Error handling utilities
â”‚   â”‚   â””â”€â”€ error.hpp               # Error definitions and handling
â”‚   â”œâ”€â”€ Frontend/                   # Frontend components (lexer, parser, AST)
â”‚   â”‚   â”œâ”€â”€ AST.hpp                 # Abstract Syntax Tree definitions
â”‚   â”‚   â”œâ”€â”€ grammar.txt             # Grammar rules for parsing
â”‚   â”‚   â”œâ”€â”€ lexer.cpp               # Lexical analyzer implementation
â”‚   â”‚   â”œâ”€â”€ lexer.h                 # Lexer header
â”‚   â”‚   â”œâ”€â”€ parser_base.hpp         # Base parser utilities and parser combinators
â”‚   â”‚   â”œâ”€â”€ parser.cpp              # Parser implementation
â”‚   â”‚   â””â”€â”€ parser.hpp              # Parser header
â”‚   â”œâ”€â”€ IR/                         # Intermediate Representation (IR) module
â”‚   â”‚   â”œâ”€â”€ docs/                   # IR documentation and specifications
â”‚   â”‚   â”œâ”€â”€ generator.cpp           # IR generator implementation (AST visitor)
â”‚   â”‚   â”œâ”€â”€ generator.hpp           # IR generation utilities
â”‚   â”‚   â”œâ”€â”€ IR.hpp                  # Core IR definitions
â”‚   â”‚   â”œâ”€â”€ README-zh_cn.md         # IR documentation (Chinese)
â”‚   â”‚   â”œâ”€â”€ README.md               # IR documentation (English)
â”‚   â”‚   â”œâ”€â”€ struct/                 # IR structural components
â”‚   â”‚   â”‚   â”œâ”€â”€ block.hpp           # Basic block representation
â”‚   â”‚   â”‚   â”œâ”€â”€ function.hpp        # Function representation with scope management
â”‚   â”‚   â”‚   â”œâ”€â”€ instruction.hpp     # Instruction definitions and OpKind enum
â”‚   â”‚   â”‚   â”œâ”€â”€ module.hpp          # Module representation
â”‚   â”‚   â”‚   â”œâ”€â”€ program.hpp         # Program-level IR
â”‚   â”‚   â”‚   â””â”€â”€ scope.hpp           # Scope management for symbols
â”‚   â”‚   â”œâ”€â”€ type/                   # Type system
â”‚   â”‚   â”‚   â”œâ”€â”€ type.cpp            # IRType implementation
â”‚   â”‚   â”‚   â”œâ”€â”€ type.hpp            # IRType definitions (int, float, array, pointer, etc.)
â”‚   â”‚   â”‚   â”œâ”€â”€ type_info.cpp       # TypeInfo implementation
â”‚   â”‚   â”‚   â””â”€â”€ type_info.hpp       # TypeInfo for frontend type representation
â”‚   â”‚   â””â”€â”€ value/                  # Value and constant systems
â”‚   â”‚       â”œâ”€â”€ constant.cpp        # Constant value implementation
â”‚   â”‚       â”œâ”€â”€ constant.hpp        # Constant value definitions
â”‚   â”‚       â””â”€â”€ value.hpp           # Value representations
â”‚   â”œâ”€â”€ LLVMCodegen/                # LLVM Backend Codegen module
â”‚   â”‚   â”œâ”€â”€ LLVMCodegenerator.cpp   # Implementation of sakIR to LLVM IR conversion
â”‚   â”‚   â””â”€â”€ LLVMCodegenerator.hpp   # LLVM Codegen definitions and state management
â”‚   â””â”€â”€ Utils/                      # Utility functions
â”‚       â””â”€â”€ Logger.hpp              # Logging utilities
â”œâ”€â”€ Runtime/                        # Runtime Library
â”‚   â”œâ”€â”€ alloc.cpp                   # Memory allocator implementation
â”‚   â”œâ”€â”€ alloc.h                     # Allocator header
â”‚   â”œâ”€â”€ print.cpp                   # Basic I/O implementation
â”‚   â”œâ”€â”€ raw_string.cpp              # String manipulation implementation
â”‚   â”œâ”€â”€ README-zh_cn.md             # Runtime documentation (Chinese)
â”‚   â””â”€â”€ README.md                   # Runtime documentation (English)
â”œâ”€â”€ includes/                       # External dependencies
â”‚   â”œâ”€â”€ magic_enum.hpp              # Enum reflection library
â”‚   â””â”€â”€ String.hpp                  # Custom string utilities
â”œâ”€â”€ sakurae/                        # VSCode Extension
â”‚   â”œâ”€â”€ language-configuration.json # Language configuration
â”‚   â”œâ”€â”€ package.json                # Extension manifest
â”‚   â”œâ”€â”€ README.md                   # Extension documentation
â”‚   â””â”€â”€ syntaxes/                   # Syntax highlighting
â”‚       â””â”€â”€ sak.tmLanguage.json     # TextMate grammar for SakuraE
â””â”€â”€ README.md                       # This file
```

## Build

### Prerequisites
- **C++ Compiler**: GCC 13+ or Clang 16+ supporting C++23 (as specified in CMakeLists.txt).
- **CMake**: Version 3.24 or higher.
- **LLVM**: Version 16+ installed and configured (required for the project, as it uses LLVM libraries).
- **Ninja**: Version 1.13.2

### Build Steps
1. **Clone the repository**:
   ```bash
   git clone https://github.com/powerangelxd/SakuraE.git
   cd SakuraE
   ```

2. **Create build directory**:
   ```bash
   mkdir build
   cd build
   ```

3. **Configure with CMake**:
   ```bash
   cmake -G Ninja ..
   ```
   This will detect LLVM and set up the build with C++23 standard and necessary flags using Ninja.

4. **Build the project**:
   ```bash
   ninja
   ```

5. **Create a `.sak` file in folder build** 
   ```bash
   touch test.sak
   ```
   Then write this program for test:
   ```bash
   echo "func fib(n: i32) -> i32 {
    if (n <= 1) {
        return n;
    }
    return fib(n - 1) + fib(n - 2);
   }

   func main() -> i32 {
       __println(\"Hello world, check fib(21):\");
       return fib(21);
   }" >> test.sak
   ```

5. **Run the compiler** (optional test):
   ```bash
   ./SakuraE
   ```

If you encounter issues, ensure LLVM development libraries are installed (e.g., `llvm-dev` package) and `llvm-config` is available in PATH.

## IR Developing
For more detailed development specifications regarding the IR, please click the link below.

[IR README](Compiler/IR/README.md)

## Runtime Library
If you want to know something about SakuraE Runtime Library, Click the link:

[SakuraE Runtime Library](Runtime/README.md)

## Contributor

- [The Flysong](https://github.com/theflysong) : Contributor inspired by the Parser

## Sponsor

- [SendsTeam](https://github.com/SendsTeam) : Provide LLM Service during developing